# 넷플릭스 유레카를 사용한 서비스 검색

## 서비스 검색 소개

### DNS 기반 서비스 검색의 문제

왜 새 마이크로서비스 인스턴스를 시작한 다음 라운드로빈 방식의 DNS를 이용하면 안되는걸까 ?

라운드 로빈 DNS의 기본 개념은 각 마이크로서비스 인스턴스가 같은 이름으로 DNS 서버에 IP 주소를 등록하는것이다. <br>
클라이언트가 DNS 이름에 대한 IP 주소를 요청하면 DNS 서버는 등록된 인스턴스의 IP 주소 목록을 반환한다. <br>
그런 다음 작동하는 IP 주소를 찾을때까지 IP 주소 목록에 있는 IP 주소로 접속을 시도하며 대부분 첫번째 주소로 연결된다. <br>
DNS 클라이언트는 보통 사용중인 IP 주소를 계속 사용하며 요청할때마다 라운드 로빈 방식을 적용하지 않는다.

### 서비스 검색의 문제

사용 가능한 마이크로서비스 인스턴스를 찾으려면 다음 사항을 고려해 마이크로서비스 인스턴스를 추적해야 한다.

- 언제든지 새로운 인스턴스가 시작될 수 있다.
- 언제든지 기존 인스턴스가 응답하지 않을 수 있으며, 결국 중단될 수 있다.
- 실패에서 복구되지 못한 인스턴스는 서비스 레지스트리에서 제거해야 한다.
- 일부 마이크로서비스 인스턴스는 시작하는데 시간이 걸릴 수 있다.
- 의도하지 않은 네트워크 파티셔닝과 그 밖의 네트워크 오류가 발생할 수 있다.

### 넷플릭스 유레카를 이용한 서비스 검색

넷플릭스 유레카는 클라이언트 측 서비스 검색을 구현한다. <br>
즉 클라이언트가 사용 가능한 마이크로서비스 인스턴스의 정보를 얻고자 소프트웨어를 실행해 검색 서버인 넷플릭스 유레카와 통신한다.

<img width="630" alt="스크린샷 2024-09-26 오후 9 04 16" src="https://github.com/user-attachments/assets/92b20a4b-9661-42cf-875c-cff27eca262c">

<br>

스프링 클라우드는 넷플릭스 유레카 등의 검색 서비스와 통신하는 방법을 추상화한 DiscoveryClient라는 인터페이스를 제공한다. <br>
DiscoveryClient를 이용하면 검색 서비스와 연계해 사용 가능한 서비스 및 인스턴스에 관한 정보를 얻을 수 있다.

<br>
<br>



https://11st-tech.github.io/2022/12/30/eureka-disaster-recovery-1/





